**这是一个利用c++实现即时聊天的后端项目**

主要使用MySQL、Redis、grpc、asio ⽹络库、⽹络编程，多线程编程、设计模式等相关技术

**项目框架**

![1709009717000](https://github.com/user-attachments/assets/a646cbb7-1ad1-47e8-904f-6b1eccccab37)

**项目介绍**

采用分布式设计，系统整体架构包括多个微服务，具体包括GateServer网关服务、多个ChatServer聊天服务、StatusServer状态服务以及VerifyServer验证服务。各个服务通过gRPC通信协议进行数据交互，确保在网络波动或服务重启时的高可用性。

GateServer网关服务负责对外提供HTTP接口，主要处理用户的登录、注册及认证请求。登录时，GateServer会向StatusServer请求获取当前负载较轻的ChatServer实例，从而实现智能负载均衡，并将用户请求转发至合适的聊天服务。此设计可以动态适应服务端的负载情况，确保系统在高并发环境下的稳定性和高效性。

ChatServer聊天服务主要负责处理用户的即时消息通信。为了保证消息传递的高效性和稳定性，ChatServer采用Asio库实现TCP协议的可靠长连接，并采用异步通信模式。为了进一步提高并发性能，ChatServer服务通过多线程池封装I/O上下文池（IOContext Pool），使得每个线程都能高效地处理多个并发连接，避免因线程创建与销毁的开销影响性能。此外，采用消息转发机制，确保每个客户端的消息能够迅速准确地传递给目标用户。

系统采用MySQL作为主数据库存储用户数据、聊天记录等信息，结合MySQL Connector库实现数据库连接池管理，保证高效的数据库连接复用与负载均衡。同时，为了提高数据访问的速度和扩展性，系统还使用Redis作为缓存数据库，用于缓存热点数据，如用户在线状态、会话信息等。通过封装Redis连接池，可以在高并发请求下快速访问缓存数据，减少数据库的访问压力。

在服务之间的通信过程中，通过连接池管理各服务的gRPC连接，确保高效的数据传输与服务请求处理。

经测试，单一服务器能够支持约8000个并发连接，多个服务器分布式部署后，系统能够扩展至1万到2万个活跃用户，且保持良好的响应速度和系统稳定性。通过这种高可扩展、高可用性的设计，系统能够在大规模用户访问下，持续稳定地提供服务。

**待开发内容**

实现资源服务器及断点续传

客户端和聊天服务的心跳机制

实现文件，图片，语音等信息传输

实现语音，视频实时通信，涉及音视频编程
